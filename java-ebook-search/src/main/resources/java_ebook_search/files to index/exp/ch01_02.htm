
[Chapter 1] 1.2 A Virtual Machine
Chapter 1Yet Another Language?
1.2 A Virtual Machine
Java is both a compiled and an interpreted language. Java source code
is turned into simple binary instructions, much like ordinary
microprocessor machine code. However, whereas C or C++ source is
refined to native instructions for a particular model of processor,
Java source is compiled into a universal format--instructions for
a virtual machine.
Compiled Java byte-code, also called J-code, is executed by a
Java run-time interpreter. The run-time system performs all the
normal activities of a real processor, but it does so in a safe, virtual
environment. It executes the stack-based instruction set and manages a
storage heap. It creates and manipulates primitive data types, and
loads and invokes newly referenced blocks of code. Most importantly,
it does all this in accordance with a strictly defined
open specification that can be implemented by anyone who wants to
produce a Java-compliant virtual machine. Together, the virtual
machine and language definition provide a complete specification.
There are no features of Java left undefined or
implementation dependent. For example, Java specifies the sizes of all
its primitive data types, rather than leave it up to each
implementation.
The Java interpreter is relatively lightweight and small; it
can be implemented in whatever form is desirable for a particular
platform. On most systems, the interpreter is written in a fast,
natively compiled language like C or C++. The interpreter can be run
as a separate application, or it can be embedded in another piece of
software, such as a Web browser.
All of this means that Java code is implicitly portable. The
same Java application can run on any platform that provides a Java
run-time environment, as shown in Figure 1.1. You
don't have to produce alternate versions of your application for
different platforms, and you never have to distribute source code to
end users.
Figure 1.1: Java virtual machine environment
The fundamental unit of Java code is the
class.  As in other object-oriented languages,
classes are application components that hold executable code and
data. Compiled Java classes are distributed in a universal binary
format that contains Java byte-code and other class
information. Classes can be maintained discretely and stored in files
or archives on a local system or on a network server. Classes are
located and loaded dynamically at run-time, as they are needed by an
application.
In addition to the platform-specific run-time system, Java has
a number of fundamental classes that contain
architecture-dependent methods. These native
methods serve as Java's gateway to the real
world. These methods are implemented in a native language on the host
platform. They provide access to resources such as the network, the
windowing system, and the host filesystem. The rest of Java is written
entirely in Java, and is therefore portable. This includes fundamental
Java utilities like the Java compiler, which is also a Java
application and is therefore immediately available on all Java
platforms.
In general, interpreters are slow, but because the Java
interpreter runs compiled byte-code, Java is a fast interpreted
language. Java has also been designed so that software implementations
of the run-time system can optimize their performance by compiling
byte-code to native machine code on the fly. This is called
"just in time" compilation. Sun claims that with
just in time compilation, Java code can execute nearly
as fast as native compiled code and maintain its
transportability and security. The one performance hit that natively
compiled Java code will always suffer is array bounds checking. But on
the other hand, some of the basic design features of Java place more
information in the hands of the compiler, which allows for certain
kinds of optimizations not possible in C or C++.
Enter Java
Java Compared
 
 
 
 
 
 
 
